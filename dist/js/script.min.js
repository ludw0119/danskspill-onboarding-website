function loadSVG(){fetch("../images/prototypesave1_game1.svg").then(e=>e.text()).then(e=>{document.querySelector("#gameBox").insertAdjacentHTML("afterbegin",e),document.querySelector("#playButton").addEventListener("mouseover",()=>{TweenLite.to("#playButton",.2,{scale:.96,transformOrigin:"50% 50%"})}),document.querySelector("#playButton").addEventListener("mouseout",()=>{TweenLite.to("#playButton",.2,{scale:1,transformOrigin:"50% 50%"})}),animationFallingBoxes(),animateListOfHorses(),console.log(document.querySelector("#pointsText").textContent),0==document.querySelector("#pointsText").textContent&&(document.querySelector("#youWonPlaceholder").innerHTML="Are you sure you don't want to play?",document.querySelector("#savePoint").innerHTML="If you play you can win points for the real betting")})}function animationFallingBoxes(){document.querySelector("#playButton").addEventListener("click",()=>{document.querySelector("#youWonPlaceholder").innerHTML="YOU WON <span id='pointsPlaceholder'>30</span> POINTS",document.querySelector("#FIRST").classList.add("hide"),TweenLite.to("#playButton",1,{scale:.5});let e=document.querySelectorAll("#whooshSound0, #whooshSound1, #whooshSound2, #whooshSound3"),o=document.querySelectorAll("#horse1, #horse2, #horse3, #horse4");for(let t=0;t<o.length;t++)console.log(t),TweenLite.from(o[t],1,{delay:t/2,y:"-=519",ease:Elastic.easeOut.config(.5,.3),onStart:function(){console.log("play "+t),e[t].play()}});document.querySelector("#SECOND").classList.remove("hide"),document.querySelectorAll("#horse1, #horse2, #horse3, #horse4").forEach(e=>{e.addEventListener("click",e=>{clickToBet(e),document.querySelector("#SECOND").classList.add("hide"),document.querySelector("#THIRD").classList.remove("hide"),TweenMax.to("#lets-race",1.4,{scale:5,opacity:0,transformOrigin:"50% 50%"})})})})}function animateListOfHorses(){let e=document.querySelectorAll(".orangeBox"),o=document.querySelectorAll(".cls-2-4a"),t=document.querySelectorAll(".text-group"),r=document.querySelectorAll("#horseImage1, #horseImage2, #horseImage3, #horseImage4");console.log(e);for(let n=0;n<e.length;n++)Array.from(e[n].querySelectorAll("text, path")).forEach(e=>{e.addEventListener("mouseenter",()=>{event.preventDefault(),console.log(event.target),TweenMax.to(o[n],.4,{scaleY:-1.2,y:"1"}),TweenMax.to(r[n],.4,{scaleY:0,transformOrigin:"100% 100%"}),TweenMax.to(t[n],.4,{y:"-70"})})});for(let n=0;n<e.length;n++)Array.from(e[n].querySelectorAll("path, text")).forEach(e=>{e.addEventListener("mouseleave",()=>{event.preventDefault(),console.log(event.target),TweenMax.to(o[n],.4,{scaleY:0}),TweenMax.to(r[n],.4,{scaleY:.33,transformOrigin:"100% 100%"}),TweenMax.to(t[n],.4,{y:"0"})})})}let i,time;window.addEventListener("load",loadSVG);let chosenHorse,position,scores=[],horses=[];function clickToBet(e){e.target.parentElement.parentElement.dataset.horse&&(chosenHorse=e.target.parentElement.parentElement.dataset.horse,horseRace(),console.log(chosenHorse,document.querySelector("#race [data-horse='"+chosenHorse+"']")))}let randomVal=Math.random();function horseRace(){let e=document.querySelector("#raceSound"),o=document.querySelectorAll("#white-horse, #brown-white-horse, #black-horse, #brown-horse");document.querySelector("#race [data-horse='"+chosenHorse+"']").style.opacity="0.7";for(let t=0;t<o.length;t++){e.play(),randomVal=Math.random(),CustomEase.create("run"+[t],"M0,0 C0.216,0.088 0.436,0.168 0.52,0.298 0.627,0.464 0.621,0.492 "+randomVal+",0.664 0.804,0.804 0.856,0.81 1,1");let r=10*Math.random();time=r+10;let n=o[t],l=new TimelineMax({repeat:-1,repeatDelay:0});l.from(n,r/10+.2,{ease:Power2.easeIn,rotation:-10,transformOrigin:"50% 50%"}),l.to(n,r/10+.2,{ease:Power2.easeOut,rotation:10,transformOrigin:"50% 50%"}),l.from(n,r/10+.2,{ease:Power2.easeIn,rotation:10,transformOrigin:"50% 50%"}),l.to(n,r/10+.2,{ease:Power2.easeOut,rotation:-10,transformOrigin:"50% 50%"}),TweenLite.to(n,time,{ease:"run"+[t],x:850,onComplete:function(){if(console.log(t,Math.round(100*time)/100),scores.push(Math.round(100*time)/100),horses.push(n.dataset.name),time=10*Math.random()+10,scores.sort(function(e,o){return e-o}),console.log(horses),console.log(horses.length),4===horses.length){showScores(),position=horses.indexOf(chosenHorse),console.log(position),document.querySelector("#THIRD").classList.add("hide"),document.querySelector(".cls-4-1").classList.remove("hide"),Array.from(document.querySelectorAll(".scorseBox"))[position].style.opacity="0.8",document.querySelector(".nextButton").addEventListener("click",showPoints),document.querySelector("#playAgainButton").addEventListener("click",()=>{document.querySelector(".cls-4-1").classList.add("hide"),document.querySelector("#FIRST").classList.remove("hide"),document.location.reload()})}}})}}function showScores(){let e=document.querySelectorAll(".horseName"),o=document.querySelectorAll(".horseTime");console.log(e.length);for(let t=0;t<e.length;t++)e[t].textContent=horses[t],o[t].textContent=scores[t]}function showPoints(){console.log(chosenHorse),document.querySelectorAll(".FIFTHcls-9a, .FIFTH2cls-24a, .FIFTH2cls-32a, .FIFTH2cls-39a").forEach(e=>{e.dataset.horse===chosenHorse&&e.classList.remove("hide"),TweenMax.from(e,3,{opacity:0})}),document.querySelectorAll(".nextButton, #playAgainButton, .scoresBox").forEach(e=>{e.classList.add("hide")}),document.querySelector("#FIFTH").classList.remove("hide");let e=document.querySelectorAll(".FIFTHcls-4a");console.log(position),document.querySelector("#pointsText").textContent=50-10*position+" POINTS",document.querySelector("#pointsPlaceholder").textContent=document.querySelector("#pointsText").textContent;let o=document.querySelectorAll("#Bell1, #Bell2, #Bell3, #Bell4, #Bell5");for(let t=0;t<5-position-1+1;t++)TweenMax.to(e[t],.5,{delay:t,fill:"#f7931e",onStart:function(){o[t].play()}});TweenMax.from("#pointsText",.5,{delay:5-position-1+1,scale:5,transformOrigin:"50% 50%",opacity:0,onStart:function(){document.querySelector("#sucess").play()},ease:Bounce.easeOut});let t=Array.from(document.querySelectorAll(".scoresParent")),r=Array.from(document.querySelectorAll(".scorseBox"));TweenMax.to(r[position],.5,{attr:{y:258}}),console.log(r[position].parentNode.childNodes[2]),TweenMax.to(t[position].querySelector(".cls-4-6"),.5,{attr:{transform:"translate(303.23 298.35)"}}),TweenMax.to(t[position].querySelector(".cls-4-7"),.5,{attr:{transform:"translate(798.01 300.63)"}}),TweenMax.to(t[position].querySelector(".cls-4-8"),.5,{attr:{transform:"translate(195.33 299.36)"}}),console.log(position);for(let e=0;e<t.length;e++)e!=position&&t[e].classList.add("hide")}
